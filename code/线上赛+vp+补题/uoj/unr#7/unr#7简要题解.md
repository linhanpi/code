## A. 那些你不要的

观察得到一次只会删除一对相邻的奇数和偶数位上的数，最后剩下的一定是奇数位上的中位数，排序求是 $\text{trivial}$ 的。

## B. 比特迷宫

鬼畜人类智慧题。

题面中给出的多项式是一个二项式展开后平移 $a$ 位后的结果，根据 $\text{Lucas}$ 定理，$\begin{pmatrix}n\\m\end{pmatrix}\equiv 1 (\bmod\ 2)\Leftrightarrow m \& n=n$，场上就推到这里，看上去好像没什么用~~已经结束里~~。

让我们乱搞起来，每次爆搜出相邻 $k$ 位的最优解，注意此时可以影响未决定的更高位，玄学取 $k$ 可以得到较高的分~~指 100pts~~。

还可以随机几次操作打乱序列（防卡），然后直接贪心，也可以拿到较高的分，~~还是指 100pts~~。

~~上面就是这道题我该掌握的解法了。~~

---

定义一对偏序关系 $x\le y \Leftrightarrow x\&y=x$，为了应用偏序关系的性质，我们需要让构造的都满足 $a\le x \le a+b$，这里 $x$ 为这组操作会影响操作的位置，这个限制等价于 $a|b=0$。

于是我们现在可以对所有下标按照二进制下 $\operatorname{popcount}$ 进行分组 ，设含有 $k$ 个 $1$ 的那组为 $S_k$，这样分组的好处是如果按照 $\operatorname{popcount}$ 数量从低到高构造，后面的不会影响前面已经构造完毕的结果。

考察对于 $S_k$ 中的一个数进行操作时对 $S_{k-1}$ 中数的影响，发现对一个数的操作只会影响与它的二进制位差别最多一位的数~~废话~~，我们称之为邻居，而且可以通过合理地钦定 $a,b$ 来简单构造出一组 $a+b\in S_k$ 且影响范围为 $a+b$ 邻居集合的任意子集，不妨设现在要求取反 $P$ 这个子集中的位置，取 $a=\operatorname{and}_{x\in P} x$ 即可。

上面这个性质启发我们可以用集合 $S_k$ 的某个子集 $T_k$ 中的元素的邻居集合覆盖 $S_{k-1}$，这样我们只用对 $T_k$ 中的每一个数操纵至多一遍便可以对 $S_{k-1}$ 中的数进行任意变换。

综上可以得到以下算法：先通过一次操作把 $n-1$ 的位置变为 $1$，从大到小操作 $T_k$，使得 $S_{k-1}$ 中除了 $T_{k-1}$ 以外的数均为 $0$，$T_{k-1}$ 均为 $1$。贪心地找 $T$ 得到上界为 $157885$，可以通过。

* 似乎可以在构造中让所有的被操作数都被操作的偏序性质限制从而给所有元素一个按照偏序的分类。
* 构造方法：通过给元素分基于偏序的类的方法来使操作不会影响已经完成构造的元素类。
* 给元素集合 $G$ 寻找一个能够通过简单操作其中的元素控制 $G$ 的集合，在本题中这个集合是他的偏序父亲的子集。

## C. 璀璨宝石

猜结论猜错了，一发错解上去~~对了65pts的点~~被 $\text{subtask}$ 卡到 5pts。

---

容易发现拿宝石和买卡两种决策实际上是独立的，你可以先把所有需要的宝石先拿到手再一次性把所有卡拿完。

假设分别需要 $A,B,C,D,E$ 个宝石，只要当前没有绝对众数，就可以通过选当前的众数保证一直不出现绝对众数，综上需要的轮数是 $\max\{A,B,C,D,E,\left \lceil \dfrac{s}{2} \right \rceil \}$。
